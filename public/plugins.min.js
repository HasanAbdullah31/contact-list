/*https://cdnjs.cloudflare.com/ajax/libs/es6-promise/4.1.1/es6-promise.auto.min.js*/!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.ES6Promise=e()}(this,function(){"use strict";function t(t){var e=typeof t;return null!==t&&("object"===e||"function"===e)}function e(t){return"function"==typeof t}function n(t){I=t}function r(t){J=t}function o(){return function(){return process.nextTick(a)}}function i(){return"undefined"!=typeof H?function(){H(a)}:c()}function s(){var t=0,e=new V(a),n=document.createTextNode("");return e.observe(n,{characterData:!0}),function(){n.data=t=++t%2}}function u(){var t=new MessageChannel;return t.port1.onmessage=a,function(){return t.port2.postMessage(0)}}function c(){var t=setTimeout;return function(){return t(a,1)}}function a(){for(var t=0;t<G;t+=2){var e=$[t],n=$[t+1];e(n),$[t]=void 0,$[t+1]=void 0}G=0}function f(){try{var t=require,e=t("vertx");return H=e.runOnLoop||e.runOnContext,i()}catch(n){return c()}}function l(t,e){var n=arguments,r=this,o=new this.constructor(p);void 0===o[et]&&k(o);var i=r._state;return i?!function(){var t=n[i-1];J(function(){return x(i,o,t,r._result)})}():E(r,o,t,e),o}function h(t){var e=this;if(t&&"object"==typeof t&&t.constructor===e)return t;var n=new e(p);return g(n,t),n}function p(){}function v(){return new TypeError("You cannot resolve a promise with itself")}function d(){return new TypeError("A promises callback cannot return that same promise.")}function _(t){try{return t.then}catch(e){return it.error=e,it}}function y(t,e,n,r){try{t.call(e,n,r)}catch(o){return o}}function m(t,e,n){J(function(t){var r=!1,o=y(n,e,function(n){r||(r=!0,e!==n?g(t,n):S(t,n))},function(e){r||(r=!0,j(t,e))},"Settle: "+(t._label||" unknown promise"));!r&&o&&(r=!0,j(t,o))},t)}function b(t,e){e._state===rt?S(t,e._result):e._state===ot?j(t,e._result):E(e,void 0,function(e){return g(t,e)},function(e){return j(t,e)})}function w(t,n,r){n.constructor===t.constructor&&r===l&&n.constructor.resolve===h?b(t,n):r===it?(j(t,it.error),it.error=null):void 0===r?S(t,n):e(r)?m(t,n,r):S(t,n)}function g(e,n){e===n?j(e,v()):t(n)?w(e,n,_(n)):S(e,n)}function A(t){t._onerror&&t._onerror(t._result),T(t)}function S(t,e){t._state===nt&&(t._result=e,t._state=rt,0!==t._subscribers.length&&J(T,t))}function j(t,e){t._state===nt&&(t._state=ot,t._result=e,J(A,t))}function E(t,e,n,r){var o=t._subscribers,i=o.length;t._onerror=null,o[i]=e,o[i+rt]=n,o[i+ot]=r,0===i&&t._state&&J(T,t)}function T(t){var e=t._subscribers,n=t._state;if(0!==e.length){for(var r=void 0,o=void 0,i=t._result,s=0;s<e.length;s+=3)r=e[s],o=e[s+n],r?x(n,r,o,i):o(i);t._subscribers.length=0}}function M(){this.error=null}function P(t,e){try{return t(e)}catch(n){return st.error=n,st}}function x(t,n,r,o){var i=e(r),s=void 0,u=void 0,c=void 0,a=void 0;if(i){if(s=P(r,o),s===st?(a=!0,u=s.error,s.error=null):c=!0,n===s)return void j(n,d())}else s=o,c=!0;n._state!==nt||(i&&c?g(n,s):a?j(n,u):t===rt?S(n,s):t===ot&&j(n,s))}function C(t,e){try{e(function(e){g(t,e)},function(e){j(t,e)})}catch(n){j(t,n)}}function O(){return ut++}function k(t){t[et]=ut++,t._state=void 0,t._result=void 0,t._subscribers=[]}function Y(t,e){this._instanceConstructor=t,this.promise=new t(p),this.promise[et]||k(this.promise),B(e)?(this.length=e.length,this._remaining=e.length,this._result=new Array(this.length),0===this.length?S(this.promise,this._result):(this.length=this.length||0,this._enumerate(e),0===this._remaining&&S(this.promise,this._result))):j(this.promise,q())}function q(){return new Error("Array Methods must be provided an Array")}function F(t){return new Y(this,t).promise}function D(t){var e=this;return new e(B(t)?function(n,r){for(var o=t.length,i=0;i<o;i++)e.resolve(t[i]).then(n,r)}:function(t,e){return e(new TypeError("You must pass an array to race."))})}function K(t){var e=this,n=new e(p);return j(n,t),n}function L(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function N(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function U(t){this[et]=O(),this._result=this._state=void 0,this._subscribers=[],p!==t&&("function"!=typeof t&&L(),this instanceof U?C(this,t):N())}function W(){var t=void 0;if("undefined"!=typeof global)t=global;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var n=t.Promise;if(n){var r=null;try{r=Object.prototype.toString.call(n.resolve())}catch(e){}if("[object Promise]"===r&&!n.cast)return}t.Promise=U}var z=void 0;z=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)};var B=z,G=0,H=void 0,I=void 0,J=function(t,e){$[G]=t,$[G+1]=e,G+=2,2===G&&(I?I(a):tt())},Q="undefined"!=typeof window?window:void 0,R=Q||{},V=R.MutationObserver||R.WebKitMutationObserver,X="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),Z="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,$=new Array(1e3),tt=void 0;tt=X?o():V?s():Z?u():void 0===Q&&"function"==typeof require?f():c();var et=Math.random().toString(36).substring(16),nt=void 0,rt=1,ot=2,it=new M,st=new M,ut=0;return Y.prototype._enumerate=function(t){for(var e=0;this._state===nt&&e<t.length;e++)this._eachEntry(t[e],e)},Y.prototype._eachEntry=function(t,e){var n=this._instanceConstructor,r=n.resolve;if(r===h){var o=_(t);if(o===l&&t._state!==nt)this._settledAt(t._state,e,t._result);else if("function"!=typeof o)this._remaining--,this._result[e]=t;else if(n===U){var i=new n(p);w(i,t,o),this._willSettleAt(i,e)}else this._willSettleAt(new n(function(e){return e(t)}),e)}else this._willSettleAt(r(t),e)},Y.prototype._settledAt=function(t,e,n){var r=this.promise;r._state===nt&&(this._remaining--,t===ot?j(r,n):this._result[e]=n),0===this._remaining&&S(r,this._result)},Y.prototype._willSettleAt=function(t,e){var n=this;E(t,void 0,function(t){return n._settledAt(rt,e,t)},function(t){return n._settledAt(ot,e,t)})},U.all=F,U.race=D,U.resolve=h,U.reject=K,U._setScheduler=n,U._setAsap=r,U._asap=J,U.prototype={constructor:U,then:l,"catch":function(t){return this.then(null,t)}},U.polyfill=W,U.Promise=U,U.polyfill(),U});
/*https://widget.cloudinary.com/v2.0/global/all.js*/!function(){"use strict";var a=self.console,l=Object.freeze({NONE:0,ERROR:1,WARN:2,INFO:3,LOG:4}),d=["error","warn","info","log"],u=window.Rollbar&&window.Rollbar.options.enabled,s={debug:["critical","error","warn","debug","log"],info:["critical","error","warn","info"],warning:["critical","error","warn"],error:["critical","error"],critical:["critical"]},c=void 0!==a&&void 0!==a.log&&void 0!==a.error&&void 0!==a.debug&&void 0!==a.warn&&"function"==typeof Function.prototype.apply,f=void 0,t=void 0,i=function(e,n,t,i){return a[n]?t?a[n](t):a[n]():e.log("----------- "+(t||i)+" ----------- ")},o=function(e){var n=e.level,o={setLevel:function(e){return n=e,o},getLevel:function(){return n||f}};return d.forEach(function(i){o[i]=function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];return function(e,n,t){if(c){var i,o=d.indexOf(n),r=e.getLevel();return~o&&o+1<=r&&a[n].apply(a,t),u&&~s[window.Rollbar.options.reportLevel].indexOf(n)&&(i=window.Rollbar)[n].apply(i,t),e}}(o,i,n)}}),o.groupCollapsed=function(e){return i(o,"groupCollapsed",e,"GROUP START")},o.group=function(e){return i(o,"group",e,"GROUP START")},o.groupEnd=function(){return i(o,"groupEnd",null,"GROUP END")},o.devError=function(){"production"!==process.env.NODE_ENV&&o.error.apply(o,arguments)},o.debug=o.log,o},e=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};e.level=e.level||l.NONE;var n=e.newInstance||!t?o(e):t;return t||e.newInstance||(t=n),n},p={LOCAL:"local",URL:"url",CAMERA:"camera",IMAGE_SEARCH:"image_search",DROPBOX:"dropbox",FACEBOOK:"facebook",INSTAGRAM:"instagram"},g="upload-finish",v="widget-view-change",h="display-changed",m="uw_init",y="uw_mini",w="uw_config",b="uw_prepare",x="uw_prebatch",E="uw_event",C="uw_show",O="uw_hide",_="uw_tags",k="uw_upload_presets",R="uw_file",S="uw_clientbatch",N=["buttonCaption","buttonClass","queueViewPosition","controlVpMeta","fieldName","frameZIndex","widgetHost"],I="initial",T="expanded",j="minimized",F=function(e,n,t,i){var o=4<arguments.length&&void 0!==arguments[4]?arguments[4]:null,r=(o=o||self).document.createElement(e);if(n=n||{},t&&(n.class=t),n){var a=n;Object.keys(a).forEach(function(e){return r.setAttribute(e,a[e])})}if(i){var l=i;Object.keys(l).forEach(function(e){return r.dataset[e]=l[e]})}return r},z=function(e){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;return n=n||self,"string"==typeof e?n.document.querySelector(e):e},A=function(e){e.parentNode&&e.parentNode.removeChild(e)},D=function(n,t){Object.keys(t).forEach(function(e){n.style[e]=t[e]})},H=function(e){D(e,{display:"none"})},L="FileReader"in self&&"FileList"in self&&"Blob"in self,U=function(e){return"string"==typeof e},r=function(e){return"function"==typeof e},q=500,V=55,B="right:35px",G="(min-width: 767px)",$=610,W="hidden",M="shown",P=e(),J=function(o,e,r){var n,t,a=/cloudinary\.com/;P.log("[all.comms]: using pm domain regex =  "+a.toString());var i=function(e,n){r.widgetCallback&&r.widgetCallback(n,e)},l=function(e,n){var t,i,o=2<arguments.length&&void 0!==arguments[2]&&arguments[2]?{type:e,data:n}:(t=e,i=n,JSON.stringify({type:t,data:i}));r.postMessage(o)},d=function(e){i({info:e,event:h,uw_event:!0,data:{event:h,info:e}})},u=((n={})[v]=function(e){r.handleWidgetViewTypeChange(e.info);var n=e.info.type===j?j:T;d(n)},n[g]=function(e){if(P.log("[all.comms]: received uploaded file data - ",e),e.info.failed)i(e.info,{status:e.info.status,statusText:e.info.statusText}),r.triggerEvent("cloudinarywidgetfileuploadfail",[e.info]);else{var n=e.info.uploadInfo,t={event:"success",info:n};r.processUploadResult(n),i(t),r.triggerEvent("cloudinarywidgetfileuploadsuccess",t)}},n),s=((t={})[E]=function(e,n){e.event&&u[e.event]?u[e.event](e,n):i({info:e.info,event:e.event,uw_event:!0,data:e})},t[O]=function(){r.hideWidget();var e={event:"close",info:{message:"user closed the widget"}};i(e),r.triggerEvent("cloudinarywidgetclosed",e),d(W)},t[b]=function(e,n){var t=function(e){return l(b,e)},i=n.prepareUploadParams||n.uploadSignature;"function"==typeof i?i(function(e){P.log("[all.comms]: received prepared data from client: ",e);var n=[].concat(e).map(function(e){return"string"==typeof e?{signature:e}:e});t(n)},e.request):"string"==typeof n.uploadSignature&&t([{signature:n.uploadSignature}])},t[x]=function(e,n){if("function"!=typeof n.preBatch)throw new Error("UploadWidget - preBatch handler not found!");n.preBatch(function(e){P.log("[all.comms]: received pre-batch data from client: ",e),l(x,e)},e.request)},t[_]=function(e,n){n.getTags(function(e){P.log("[all.comms]: received tags from client: ",e),l(_,{tags:e})},e.prefix)},t[k]=function(e,n){n.getUploadPresets(function(e){P.log("[all.comms]: received uploadPresets from client: ",e),l(k,{uploadPresets:e})})},t);return window.addEventListener("message",function(e){var n=o();if(e.origin.match(a)){var t=function(n){var e=void 0;try{U(n)&&(e=JSON.parse(n))}catch(e){P.log("[all.comms]: failed to deserialize message: ",n)}return e}(e.data),i=!1;t&&t.widgetId&&t.widgetId===n.widgetId&&(P.log("[all.comms]: received message from widget: "+n.widgetId,t),s[t.type]&&(i=!0,s[t.type](t,n))),i||P.log("[all.comms]: received invalid message, invalid widget ID or invalid type! ",e.data)}}),{sendMessage:l,sendDisplayChangedCallback:d}},K=/(left|right)(?::([0-9a-z]*))?$/,X='head meta[name="viewport"]',Q=function(r,a,n){var e=r(),o={raw:B,side:null,offset:null},l=F("iframe",{frameborder:"no",allow:"camera",width:"100%",height:"100%"},null,{test:"uw-iframe"});D(l,{border:"none",background:"transparent"});var t=window.matchMedia(G),d=e.inlineContainer&&z(e.inlineContainer),u=e.frameContainer&&z(e.frameContainer);d&&D(d,{minHeight:$+"px",overflowX:"hidden"}),u&&D(u,{position:"relative"});var i=null,s=!1,c="",f=!1,p=!1,g=!1,v=!1,h=void 0,m=function(e){e.preventDefault()},y=function(){if(!d&&!u){var e=g&&v;h.body&&(i=null===i?h.body.style.overflow:i,h.body.style.overflow=e?"hidden":i),e?h.addEventListener("touchmove",m):h.removeEventListener("touchmove",m),function(e){if(!0===r().controlVpMeta)if(e){var n=z(X,self.top);n||(n=F("meta",{name:"viewport"},null,null,self.top),h.head.appendChild(n)),n.content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"}else{var t=z(X,self.top);s&&t?t.content=c:t&&h.head.removeChild(t)}}(e)}},w=function(){f&&p&&(H(l),g=!1,y())},b=function(){f&&p&&(D(l,{display:"block"}),g=!0,y(),l.focus())},x=function(){var e;e=l,(d||(u||void 0)||document.body).appendChild(e),d||h.addEventListener("keyup",function(e){27===e.keyCode&&w()})},E=function(e){var n=Math.min(q,window.innerWidth)+"px";D(l,{width:e?"100%":n,bottom:e?"0px":"5px",height:V+"px",top:""}),function(e){var n=r();if(n.queueViewPosition&&n.queueViewPosition!==o.raw||!o.side||!o.offset){o.raw=n.queueViewPosition||o.raw;var t=K.exec(o.raw);if(!t)throw new Error("queueViewPosition param ("+(n.queueViewPosition||"")+') is invalid. (valid ex: "right:35px")');o.side=t[1],o.offset=t[2]||"0"}var i=void 0;i=e?{left:"0px",right:"0px"}:"left"===o.side?{left:o.offset||"",right:""}:{right:o.offset||"",left:""},D(l,i)}(e),v=!1,y()},C=function(){D(l,d?{height:$+"px",width:"100%"}:{width:"100%",height:"100%",top:"0px",left:"0px",bottom:""}),v=f,y()},O=function(){b(),C()},_=function(e){E(!e.matches)},k=function(e){switch(t.removeListener(_),e.type){case I:case T:C();break;case j:E(!t.matches),t.addListener(_)}},R=function(e){return l.contentWindow.postMessage(e,a)},S=function(){return p},N=function(){return f},A=function(){return f&&g},L=function(){return N()&&!v},U=function(){w(),f=!1},W=function(e){f=!0,p&&(O(),e&&e.files&&H(l))},M=function(){f&&p&&!v&&E(!t.matches)},P=function e(){l.removeEventListener("load",e),p=!0,n({open:W,close:U,showWidget:b,hideWidget:w,isFrameReady:S,isWidgetOpen:N,isWidgetMinimized:L,isWidgetShowing:A,postMessage:R,handleWidgetViewTypeChange:k,optionsUpdated:M}),O()};!function(e){h=function(){var e=self.document;try{e=self.top.document}catch(e){}return e}();var n,t,i=(t=[],(n=e).debug&&t.push("debug=true"),n.dev&&t.push("dev=true"),n.cloudName&&t.push("cloudName="+n.cloudName),t.push("pmHost="+self.location.protocol+"//"+self.location.host),t),o=a+"?"+i.join("&");l.setAttribute("src",o),H(l),D(l,{position:d?null:u?"absolute":"fixed",zIndex:d?null:e.frameZIndex||"1000000"}),l.addEventListener("load",P),function(){if(!0===r().controlVpMeta){var e=z(X,self.top);e&&(c=e.content,s=!0)}}(),x()}(e)},Y="fetch"in self,Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ee=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},ne=function(i){var o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"GET",e=arguments[2],r=arguments[3],a=4<arguments.length&&void 0!==arguments[4]?arguments[4]:{},l=e&&"object"===(void 0===e?"undefined":Z(e))?JSON.stringify(e):e,n=Y;return(n?self.fetch(i,ee({method:o,body:l,headers:r?new Headers(r):void 0},a.fetchOptions)):new Promise(function(e,n){var t=new XMLHttpRequest;t.open(o,i),a.responseType&&(t.responseType=a.responseType),t.onerror=function(){return n(t)},t.ontimeout=function(){return n(t)},t.onload=function(){return e(t)},function(n,e){if(e){var t=e;Object.keys(t).forEach(function(e){return n.setRequestHeader(e,t[e])})}}(t,r),t.send(l)})).then(function(e,n,t){var i=n.responseType,o=function(e){return t.response=e,t};return!n.dontRead&&e&&t.ok?i&&t[i]?t[i]().then(o):t.json().then(o):t}.bind(null,n,a))},te=e(),ie="cloudinary-button",oe="cloudinary-thumbnails",re="cloudinary-thumbnail",ae="cloudinary-delete",le=function(e){return e.fieldName||"image"},de=function(e,n){var t=n.form;return!t&&e&&(t=function(e,n){var t,i=null;if(e.closest)i=e.closest(n);else{var o=self.document.querySelectorAll(n);if(o&&o.length)for(var r=0;r<o.length;r++){var a=o[r];if(t=e,a.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY){i=a;break}}}return i}(e,"form")),t},ue=function(e,n,t){var i=de(n,t);i&&(i=z(i))&&function(e,n,t){var i=F("input",{type:"hidden",name:le(t)},null,{cloudinaryPublicId:e.public_id});i.value=[e.resource_type,e.type,e.path].join("/")+"#"+e.signature;try{i.dataset.cloudinary=JSON.stringify(e)}catch(e){te.error("[all.pageIntegrations]: failed to add info as serialized data attribute")}n.appendChild(i)}(e,i,t)},se=function(o,r,a,l,d,u){o.addEventListener("click",function n(e){var t,i=((t=d).deleteHost?t.deleteHost:"https://api"+(t.dev?"-dev":t.staging?"-staging":"")+".cloudinary.com")+"/v1_1/"+d.cloudName+"/delete_by_token";return te.log("[all.pageIntegrations]: \n        about to send delete request with token: "+l.delete_token+" to : "+i),e.preventDefault(),ne(i,"POST",{token:l.delete_token},{"Content-Type":"application/json"},{dontRead:!0}).then(function(e){200===e.status&&(te.log("[all.pageIntegrations]: successfully deleted file"),o.removeEventListener("click",n),function(e,n,t,i){A(e);var o=de(n,i);if(o){var r=o.querySelector('input[name="'+le(i)+'"][data-cloudinary-public-id="'+t.public_id+'"]');r&&A(r)}}(r,a,l,d),u.triggerEvent("cloudinarywidgetdeleted",l))}).catch(function(e){te.warn("[all.pageIntegrations]: failed to delete file with status: "+e.status)})})},ce=function(e,n,t,i){if(!1!==t.thumbnails&&(t.thumbnails||n)){var o=!0,r=z("."+oe);if(r||(o=!1,r=F("ul",null,oe)),r.appendChild(function(e,n,t,i){var o=F("li",null,re,{cloudinary:JSON.stringify(e)}),r=void 0;e.thumbnail_url?(r=F("img",{src:e.thumbnail_url})).addEventListener("load",function e(){o.classList.add("active"),r.removeEventListener("load",e)}):(r=F("span")).textContent=e.public_id;if(o.appendChild(r),e.delete_token){var a=F("a",{href:"#"},ae);a.textContent="x",o.appendChild(a),se(a,o,n,e,t,i)}return o}(e,n,t,i)),!o){te.log("[all.pageIntegrations]: adding thumbnails list to dom");var a=t.thumbnails&&z(t.thumbnails);a?a.appendChild(r):n&&n.insertAdjacentElement("afterend",r)}}},fe=function(e,n){return 0===n?e:e.substr(0,1).toUpperCase()+e.substr(1)},n=function(t){return Object.keys(t).reduce(function(e,n){return e[0<n.indexOf("_")?n.split("_").map(fe).join(""):n]=t[n],e},{})},pe=["keepWidgetOpen","stylesheet"],ge=Object.prototype.toString,ve=function(n){return pe.forEach(function(e){void 0!==n[e]&&function(){var e;(e=console).warn.apply(e,arguments)}("Cloudinary.UploadWidget - '"+e+"' is no longer used in this version.")})},he=function(e){return e?n(e):{}},me=e(),ye="DATA_URL",we="ARRAY_BUFFEr",be=e(),xe=0,Ee=function(g){var v=null,l=function(n,e,t,i,l){var d,u,o,r,a,s,c,f,p=void 0;return!i.maxFileSize||0<i.maxFileSize&&n.size<=i.maxFileSize?(v||(d=[],u=new FileReader,o=null,r=function(){o&&o.readResolve({file:o.file,index:o.index,count:o.count,result:u.result}),a()},a=function(){o=null,u.removeEventListener("load",r,!1),u.removeEventListener("error",s,!1),d.length&&c(d.shift())},s=function(){me.log("[utils.fileReader]: failed to read file",u.error),o&&o.readReject(u.error),a()},c=function(e){o=e,u.addEventListener("load",r,!1),u.addEventListener("error",s,!1),e.readAs===we?u.readAsArrayBuffer(e.file):u.readAsDataURL(e.file)},f=function(i,o){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;return new Promise(function(e,n){var t={file:o,index:r,count:a,readAs:i,readResolve:e,readReject:n};1!==u.readyState?c(t):d.push(t)})},v={readAsUrl:function(e){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;return f(ye,e,n,t)},readAsBuffer:function(e){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;return f(we,e,n,t)}}),p=v.readAsUrl(n,e,t).then(function(e){return t=l,i=(n=e).file,o=n.result,r=n.index,a=n.count,void g.sendMessage(R,{lastModified:i.lastModified,lastModifiedDate:i.lastModifiedDate,name:i.name,size:i.size,type:i.type,file:o,index:r,count:a,batchId:t},!0);var n,t,i,o,r,a}).catch(function(e){be.error("[global.all.uploadsHandler]: failed to send file data to widget for upload",e.code,n)})):be.log("[global.all.uploadsHandler]: provided file is larger than max file size configured",n.size),p},r=function(o,r,a){return Promise.race(Array.prototype.map.call(o,function(e,n){var t,i=null;return t=e,L&&(t instanceof File||"[object File]"===t.toString())?i=l(e,n,o.length,r,a):U(e)?g.sendMessage(R,{file:e,index:n,count:o.length,batchId:a}):be.warn("[global.all.uploadsHandler]: unknown type of object sent to upload",e),i}))};return{handleFiles:function(e,n){return e&&e.files&&e.files.length?(t=e.files,i=n,o="batch_"+(xe+=1),g.sendMessage(S,{batchId:o,count:t.length}),r(t,i,o)):Promise.resolve();var t,i,o}}},Ce=e(),Oe=0,_e=function(e,n){var t=function(e,n){if(e=e||{},"[object Object]"!==ge.call(e))throw new Error("[Cloudinary.UploadWidget]: widget options must be a valid Object");var t=he(e);return t.secure=!1!==t.secure,t.requirePrepareParams=!!t.prepareUploadParams||!!t.uploadSignature,t.useTagsCallback=r(t.getTags),t.useUploadPresetsCallback=r(t.getUploadPresets),t.usePreBatchCallback=r(t.preBatch),t.inlineMode=!!t.inlineContainer,t.fieldName=e.fieldName||n&&n.getAttribute("name")||null,ve(t),t}(e,n);return Oe+=1,t.widgetId="widget_"+Oe,t},ke=function(e,a,l){l=function(e,n){var t=e||n&&n.element;if(t){try{t=z(t)}catch(e){throw new Error("[Cloudinary.UploadWidget]: 'element' param must either be a valid HTMLElement or a selector string")}if(!t||!t.nodeType)throw new Error("[Cloudinary.UploadWidget]: 'element' param must resolve to a valid HTMLElement")}return t}(l,e);var r=_e(e,l);if(r.inlineContainer&&!z(r.inlineContainer))throw new Error("[Cloudinary.UploadWidget]: 'inlineContainer' param must either be a valid HTMLElement or a selector string");delete r.element;var n,t=void 0,d=void 0,u=void 0,s=void 0,c=void 0,f=function(e,n){r.$&&r.$(l||r.form||document).trigger(e,n)},i=function(e){return t?t.then(e).catch(function(e){return Ce.error("Cloudinary.UploadWidget - encountered error ! ",e)}):Ce.error("Cloudinary.UploadWidget - Widget frame API not ready yet!")},p=function(n,t){return i(function(e){e.open(t),e.isFrameReady()&&(d.sendMessage(C,{source:n,options:t},!0),u.handleFiles(t,g()).then(function(){setTimeout(function(){e.showWidget(),d.sendDisplayChangedCallback(M)},150)}))})},o=function(o){return i(function(e){var n,t,i=he(o);d.sendMessage(w,i),n=i,t=ee({},r),N.forEach(function(e){void 0!==n[e]&&(t[e]=n[e])}),r=t,e.optionsUpdated()})},g=function(){return r};return n=function(){var e=r.secure?"https:":"http:",n=void 0;if(!0===r.dev)n="//widget-dev.cloudinary.com/index.html";else{var t=(r.widgetBase||"//widget"+(!0===r.staging?"-staging":"")+".cloudinary.com/")+"v2.0/n/";n=r.widgetHost||t+r.cloudName+"/"+r.widgetVersion+"/index.html"}return n=0!==n.indexOf("http")?e+n:n}(),(t=new Promise(Q.bind(null,g,n))).then(function(e){s=e.isWidgetShowing,c=e.isWidgetMinimized,d=J(g,0,ee({triggerEvent:f,processUploadResult:function(e){return n=e,t=l,i=g(),o={triggerEvent:f},ue(n,t,i),void ce(n,t,i,o);var n,t,i,o},widgetCallback:a},e));var n,t,i,o,r=g();d.sendMessage(m,ee({},r,{showOnStart:e.isWidgetOpen()})),u=Ee(d),l&&(n=l,t=p,(o=F("a",{href:"#"},(i=r).buttonClass||ie)).innerHTML=i.buttonCaption||"Upload image",n.style.display="none",n.parentNode&&n.parentNode.insertBefore(o,n.previousSibling),o.addEventListener("click",function(e){return t(),e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation(),!1}))}),{open:function(e,n){return p(e,n),this},update:function(e){var n=this;return o(e).then(function(){return n})},close:function(e){var n;return n=e,i(function(e){e.close(),d.sendMessage(O,n)}),this},hide:function(){return i(function(e){return e.hideWidget()}),this},show:function(){return i(function(e){return e.showWidget()}),this},minimize:function(){return i(function(){d.sendMessage(y)}),this},isShowing:function(){return!!s&&s()},isMinimized:function(){return!!c&&c()}}},Re=e();!function(e){var n,i={cloudName:null,apiKey:null},o=e.jQuery?e.jQuery:e.$&&e.$.fn&&e.$.fn.jquery?e.$:null,r=-1<e.location.search.indexOf("debug=true"),a=-1<e.location.search.indexOf("dev=true");n=r?l.LOG:l.WARN,f=n,function(){try{var e=F("style",{id:"cloudinary-uw-page-styles",type:"text/css"});e.innerHTML=".cloudinary-thumbnails { list-style: none; margin: 10px 0; padding: 0 }\n        .cloudinary-thumbnails:after { clear: both; display: block; content: '' }\n        .cloudinary-thumbnail { float: left; padding: 0; margin: 0 15px 5px 0; display: none } \n        .cloudinary-thumbnail.active { display: block } \n        .cloudinary-thumbnail img { border: 1px solid #01304d; border-radius: 2px; -moz-border-radius: 2px; -webkit-border-radius: 2px } \n        .cloudinary-thumbnail span { font-size: 11px; font-family: Arial, sans-serif; line-height: 14px; border: 1px solid #aaa; max-width: 150px; word-wrap: break-word; word-break: break-all; display: inline-block; padding: 3px; max-height: 60px; overflow: hidden; color: #999; } \n        .cloudinary-delete { vertical-align: top; font-size: 13px; text-decoration: none; padding-left: 2px; line-height: 8px; font-family: Arial, sans-serif; color: #01304d }\n        .cloudinary-button { background-color: #0078FF; color: #FFFFFF; text-decoration: none; font-size: 14px; line-height: 28px; height: 28x; cursor: pointer; font-weight: normal; display: inline-block; border-radius: 4px; padding: 10px 14px;}\n        .cloudinary-button:hover {-webkit-box-shadow: 0 2px 4px 0 rgba(0, 0, 0, .5); box-shadow: 0 2px 4px 0 rgba(0, 0, 0, .5); } ";var n=z("head");n&&n.appendChild(e)}catch(e){Re.error("[all.pageStyles]: failed to apply styles")}}();var t=e.cloudinary=e.cloudinary||{};t.applyUploadWidget=function(e,n,t){return ke(ee({},i,{dev:a,debug:r},n,{widgetVersion:"207",$:o}),t,e)},t.createUploadWidget=function(e,n){return t.applyUploadWidget(null,e,n)},t.openUploadWidget=function(e,n){return t.createUploadWidget(e,n).open()},t.setCloudName=function(e){i.cloudName=e},t.setAPIKey=function(e){i.apiKey=e},t.WIDGET_SOURCES=ee({},p),t.WIDGET_VERSION="207",o&&(o.fn.cloudinary_upload_widget=function(e,n){t.applyUploadWidget(o(this)[0],e,n)})}(self)}();
